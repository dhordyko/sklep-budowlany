<mat-card>
  <!-- Summary Form-->
  <mat-card-title class="mb-5">
    <h1>Formularz zamówienia</h1>

    <p *ngIf="!this.firstFormGroup.valid" class="text-center text-muted">
      <strong>Prosimy uzupełnić formularz dla kontynuacji </strong>
    </p>
    <p *ngIf="this.firstFormGroup.valid" class="text-center text-muted">
      <strong>Dziękujemy. Prosimy kontynuować</strong>
    </p>
  </mat-card-title>

  <mat-card-content>
    <!-- Stepper-->
    <mat-horizontal-stepper
      [linear]="false"
      #stepper
      fxShow.sm="false"
      fxShow.md="true"
      fxShow.gt-md="true"
      fxShow.xs="false"
      fxShow="false"
    >
      <!-- First step --- Personal details-->
      <mat-step [stepControl]="firstFormGroup">
        <div class="d-flex justify-content-center mt-4">
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Podaj swoje dane </ng-template>
              <mat-form-field class="example-form-field">
                <mat-label style="color: #333;">Imię</mat-label>
                <input
                  matInput
                  MatFormFieldControl
                  formControlName="firstName"
                  required
                />
                <mat-error *ngIf="firstFormGroup.get('firstName').touched"
                  >Prosimy wprowadzić imię</mat-error
                >
              </mat-form-field>
            </form>
          </div>
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Podaj swoje dane</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label style="color: #333;">Nazwisko</mat-label>
                <input matInput formControlName="lastName" />
              </mat-form-field>
            </form>
          </div>
        </div>

        <!-- ------------- -->

        <div class="d-flex justify-content-center mt-4">
          <div>
            <!-- Second step --- Personal details-->
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Podaj swoje dane</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label style="color: #333;">Adres</mat-label>
                <input
                  matInput
                  MatFormFieldControl
                  formControlName="address"
                  required
                />
                <mat-error *ngIf="firstFormGroup.get('address').touched"
                  >Please enter your address</mat-error
                >
              </mat-form-field>
            </form>
          </div>
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Fill out billing details</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label style="color: #333;">Town/City</mat-label>
                <input matInput formControlName="city" />
              </mat-form-field>
            </form>
          </div>
        </div>

        <!-- ------------- -->
        <div class="d-flex justify-content-center mt-4">
          <div>
            <!-- Third step --- Personal details-->
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Podaj swoje dane</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label style="color: #333;"
                  >Kraj <small>(required)</small></mat-label
                >
                <input
                  matInput
                  MatFormFieldControl
                  formControlName="country"
                  required
                />
                <mat-error *ngIf="firstFormGroup.get('address').touched"
                  >Please enter your country</mat-error
                >
              </mat-form-field>
            </form>
          </div>
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Podaj swoje dane</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label style="color: #333;">Kod pocztowy </mat-label>
                <input matInput formControlName="postIndex" />
              </mat-form-field>
            </form>
          </div>
        </div>

        <!-- ------------- -->
        <div class="d-flex justify-content-center mt-4">
          <div>
            <!-- Forth step --- Personal details-->
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Podaj swoje dane</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label style="color: #333;"
                  >Telefon <small>(required)</small></mat-label
                >
                <input
                  matInput
                  MatFormFieldControl
                  formControlName="phone"
                  required
                />
                <mat-error *ngIf="firstFormGroup.get('address').touched"
                  >Please enter your phone</mat-error
                >
              </mat-form-field>
            </form>
          </div>
          <div>
            <!-- Fifth step --- Personal details-->
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Podaj swoje dane</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label style="color: #333;"
                  >Email <small> (required)</small></mat-label
                >
                <input
                  matInput
                  formControlName="email"
                  MatFormFieldControl
                  required
                />
                <mat-error
                  *ngIf="
                    firstFormGroup.get('email').touched &&
                    firstFormGroup.get('email').invalid
                  "
                  >{{ getErrorMessage() }}</mat-error
                >
              </mat-form-field>
            </form>
          </div>
        </div>
        <div class="mt-5 px-3 btn-container">
          <button
            class="mx-4 order-form-btn"
            mat-button
            (click)="stepper.reset()"
          >
            Wyczyść
          </button>

          <button
            #checkbtn
            class="mx-4 order-form-btn"
            mat-button
            (click)="FirstStepCheck(stepper)"
          >
            Dalej
          </button>
        </div>
      </mat-step>

      <mat-step [stepControl]="secondFormGroup">
        <!-- First step --- Order Summary-->
        <form [formGroup]="secondFormGroup">
          <ng-template matStepLabel>Podsumowanie</ng-template>
          <mat-card>
            <mat-card-content>
              <div
                fxLayout="row"
                class="summary-info-container"
                fxLayoutAlign="space-around stretch"
              >
                <div
                  fxLayout="column"
                  fxLayoutAlign="space-around center"
                  *ngIf="cartProducts.length !== 0"
                >
                  <h4 class="font-weight-bold text-muted border-outline">
                    Lista zamówionych produktów
                  </h4>

                  <div class="product-list-container pt-3">
                    <div
                      *ngFor="let product of cartProducts"
                      fxLayout="column"
                      fxLayoutAlign="space-around start"
                      fxLayoutGap="15px"
                    >
                      <p class="size font-weight-bold">
                        {{ product.name }}
                      </p>
                    </div>
                  </div>
                </div>
                <div
                  fxLayout="column"
                  fxLayoutAlign="space-around center"
                  *ngIf="cartProducts.length !== 0"
                >
                  <h4
                    class="font-weight-bold text-muted text-center border-outline"
                  >
                    Do zapłaty
                  </h4>

                  <div class="product-price-container pt-3">
                    <div *ngFor="let product of cartProducts">
                      <p
                        class="size font-weight-bold danger"
                        fxLayout="column"
                        fxLayoutAlign="space-around center"
                        fxLayoutGap="15px"
                      >
                        {{ product.client_price
                        }}<span *ngIf="cartProducts.length === 0"> 0 </span>zł
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ---------- -->

              <div class="row text-lg-left mt-4">
                <div class="col-md-8">
                  <div
                    class="mt-3"
                    fxLayout="column"
                    fxLayoutAlign="space-around end"
                    style="height: 100px;"
                    *ngIf="cartProducts.length === 0"
                  >
                    <h3 class="mr-3 text-muted">
                      <em>Kosz jest pusty</em>
                    </h3>
                  </div>
                </div>

                <div class="col-md-4 text-lg-left">
                  <div class="mt-3"></div>
                </div>
              </div>
              <!-- -------------- -->

              <div class="row text-lg-center mt-4">
                <div class="col-md-8">
                  <mat-divider></mat-divider>
                  <div class="mt-3"></div>
                  <h4 class="my-3">Suma do zapłaty</h4>
                  <h4 class="my-5">Opcji dostawy</h4>
                </div>

                <div class="col-md-4 text-lg-left">
                  <mat-divider></mat-divider>
                  <div class="mt-3"></div>

                  <h5 class="my-3 font-weight-bold text-danger size">
                    <span *ngIf="IconPrice == null">
                      0
                    </span>
                    {{ IconPrice }} zł
                  </h5>
                  <mat-radio-group
                    aria-label="Select an option"
                    class="d-flex flex-column my-5"
                    formControlName="shippingMode"
                    name="shippingMode"
                  >
                    <mat-radio-button value="DHL">
                      <h6 class="text-muted text-primary">
                        <em>DHL</em>
                      </h6>
                    </mat-radio-button>
                    <mat-radio-button value="Inpost">
                      <h6 class="text-muted text-primary">
                        <em>Inpost</em>
                      </h6>
                    </mat-radio-button>
                  </mat-radio-group>
                </div>
              </div>

              <!-- ------ -->
              <div class="row text-lg-left mt-4">
                <div class="col-md-8">
                  <mat-divider></mat-divider>
                  <div class="mt-3"></div>
                  <h3 class="my-4">Total</h3>
                </div>

                <div class="col-md-4">
                  <mat-divider></mat-divider>
                  <div class="mt-3"></div>

                  <p class="size font-weight-bold">
                    {{ IconPrice }}<span *ngIf="IconPrice == null"> 0 </span>$
                  </p>
                </div>
              </div>

              <!-- ------ -->
              <div class="row text-lg-left mt-4">
                <div class="col-md-12">
                  <h1><em>Additional information</em></h1>
                  <h6 class="text-muted">Order notes (optional)</h6>
                  <mat-divider></mat-divider>

                  <mat-form-field appearance="fill" class="mt-4 w-75">
                    <mat-label style="color: #333;">Textarea</mat-label>
                    <textarea matInput></textarea>
                  </mat-form-field>
                </div>
              </div>

              <!-- ------ -->
              <div class="row text-lg-left mt-4">
                <div class="col-md-12">
                  <mat-divider></mat-divider>
                  <mat-radio-group
                    aria-label="Select an option"
                    class="d-flex flex-column my-5"
                    formControlName="payment"
                    name="payment"
                  >
                    <mat-radio-button value="PayPal">
                      <h6 class="text-muted text-primary">
                        <em>PayPal</em>
                      </h6>
                    </mat-radio-button>
                    <mat-radio-button value="CreditCard">
                      <h6 class="text-muted text-primary">
                        <em>CreditCard</em>
                      </h6>
                    </mat-radio-button>
                  </mat-radio-group>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div class="mt-5 px-3 btn-container">
            <button class="mx-4 order-form-btn" mat-button matStepperPrevious>
              Powróć
            </button>
            <button
              class="mx-4 order-form-btn"
              mat-raised-button
              (click)="submit(stepper)"
              [disabled]="submited"
            >
              Zamów
            </button>
          </div>
        </form>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Udało się</ng-template>
        <mat-card>
          <mat-card-content>
            <h1 class="text-centertext-primary">Dziękujemy za zamówienie</h1>
          </mat-card-content>
        </mat-card>

        <div>
          <button mat-button class="order-form-btn" [routerLink]="['/']">
            Wróć do skłepu
          </button>
          <button mat-button class="order-form-btn" [routerLink]="['/cart']">
            Wróć do koszyka
          </button>
        </div>
      </mat-step>
    </mat-horizontal-stepper>

    <!-- ------------------------------------------- -->
    <mat-vertical-stepper
      fxShow.sm="true"
      fxShow.md="false"
      fxShow.xs="true"
      fxShow="false"
      #VertStepper
      [linear]="isLinear"
    >
      <mat-step [stepControl]="firstFormGroup">
        <div
          fxLayout.xs="column"
          fxLayout.sm="column"
          fxLayout.md="column"
          class="d-flex justify-content-center mt-4"
        >
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Fill out billing details</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label>First Name</mat-label>
                <input
                  matInput
                  MatFormFieldControl
                  formControlName="firstName"
                  required
                />
                <mat-error *ngIf="firstFormGroup.get('firstName').touched"
                  >Please enter your name</mat-error
                >
              </mat-form-field>
            </form>
          </div>
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Fill out billing details</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label>Last Name</mat-label>
                <input matInput formControlName="lastName" />
              </mat-form-field>
            </form>
          </div>
        </div>

        <!-- ------------- -->

        <div
          class="d-flex justify-content-center mt-4"
          fxLayout.xs="column"
          fxLayout.sm="column"
          fxLayout.md="column"
        >
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Fill out billing details</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label>Address</mat-label>
                <input
                  matInput
                  MatFormFieldControl
                  formControlName="address"
                  required
                />
                <mat-error *ngIf="firstFormGroup.get('address').touched"
                  >Please enter your address</mat-error
                >
              </mat-form-field>
            </form>
          </div>
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Fill out billing details</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label>Town/City</mat-label>
                <input matInput formControlName="city" />
              </mat-form-field>
            </form>
          </div>
        </div>

        <!-- ------------- -->
        <div
          class="d-flex justify-content-center mt-4"
          fxLayout.xs="column"
          fxLayout.sm="column"
          fxLayout.md="column"
        >
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Fill out billing details</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label>State/Counry <small>(required)</small></mat-label>
                <input
                  matInput
                  MatFormFieldControl
                  formControlName="country"
                  required
                />
                <mat-error *ngIf="firstFormGroup.get('address').touched"
                  >Please enter your country</mat-error
                >
              </mat-form-field>
            </form>
          </div>
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Fill out billing details</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label>PostCode/Zip </mat-label>
                <input matInput formControlName="postIndex" />
              </mat-form-field>
            </form>
          </div>
        </div>

        <!-- ------------- -->
        <div
          class="d-flex justify-content-center mt-4"
          fxLayout.xs="column"
          fxLayout.sm="column"
          fxLayout.md="column"
        >
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Fill out billing details</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label>Phone <small>(required)</small></mat-label>
                <input
                  matInput
                  MatFormFieldControl
                  formControlName="phone"
                  required
                />
                <mat-error *ngIf="firstFormGroup.get('address').touched"
                  >Please enter your phone</mat-error
                >
              </mat-form-field>
            </form>
          </div>
          <div>
            <form [formGroup]="firstFormGroup" class="example-form">
              <ng-template matStepLabel>Fill out billing details</ng-template>
              <mat-form-field class="example-form-field">
                <mat-label>Email <small> (required)</small></mat-label>
                <input
                  matInput
                  formControlName="email"
                  MatFormFieldControl
                  required
                />
                <mat-error
                  *ngIf="
                    firstFormGroup.get('email').touched &&
                    firstFormGroup.get('email').invalid
                  "
                  >{{ getErrorMessage() }}</mat-error
                >
              </mat-form-field>
            </form>
          </div>
        </div>
      </mat-step>

      <mat-step [stepControl]="secondFormGroup">
        <form [formGroup]="secondFormGroup">
          <ng-template matStepLabel>Your Order Summary</ng-template>
          <mat-card>
            <mat-card-content>
              <div class="container">
                <div
                  class="row"
                  fxShow.sm="false"
                  fxLayout.sm="column"
                  fxLayout.xs="column"
                  fxLayout.md="column"
                >
                  <div class="col-md-7 text-lg-left">
                    <h2
                      class="font-weight-bold text-muted"
                      [ngStyle.xs]="{ 'font-size': '4vw' }"
                    >
                      List of Products
                    </h2>
                  </div>
                  <div class="row text-lg-left mt-4" fxLayout.sm="column">
                    <div class="col-md-8">
                      <mat-divider></mat-divider>
                      <div class="mt-3"></div>
                      <p *ngIf="IconPrice == null">
                        No items in the cart
                      </p>
                      <div *ngFor="let product of cartProducts">
                        <p class="size font-weight-bold">
                          {{ product.name }}
                        </p>
                      </div>
                    </div>

                    <div class="col-md-4 text-lg-left">
                      <div class="col-md-5 text-lg-left">
                        <h2
                          [ngStyle.xs]="{ 'font-size': '4vw' }"
                          class="font-weight-bold text-muted mb-5"
                        >
                          Total Price
                        </h2>
                      </div>
                      <mat-divider></mat-divider>
                      <div class="mt-3"></div>
                      <div *ngFor="let product of cartProducts">
                        <p class="size font-weight-bold">
                          {{ product.cost
                          }}<span *ngIf="IconPrice == null"> 0 </span>$
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
                <!--
                ------------sm-layout---------- -->

                <div
                  class="row"
                  fxShow.sm="true"
                  fxLayout.sm="column"
                  fxLayout.xs="column"
                >
                  <div>
                    <h2
                      class="font-weight-bold text-muted"
                      [ngStyle.xs]="{ 'font-size': '4vw' }"
                    >
                      List of Products
                    </h2>
                  </div>
                  <div fxLayout.sm="column">
                    <div>
                      <mat-divider></mat-divider>
                      <div class="mt-3"></div>
                      <p *ngIf="IconPrice == null">
                        No items in the cart
                      </p>
                      <div *ngFor="let product of cartProducts">
                        <p class="size font-weight-bold">
                          {{ product.name }}
                        </p>
                      </div>
                    </div>

                    <div>
                      <div>
                        <h2
                          [ngStyle.xs]="{ 'font-size': '4vw' }"
                          class="font-weight-bold text-muted"
                        >
                          Total Price
                        </h2>
                      </div>
                      <mat-divider></mat-divider>
                      <div class="mt-3"></div>
                      <div *ngFor="let product of cartProducts">
                        <p class="size font-weight-bold">
                          {{ product.cost
                          }}<span *ngIf="IconPrice == null"> 0 </span>$
                        </p>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- ---------- -->

                <!-- -------------- -->

                <div class="row text-lg-left mt-4" fxLayout.sm="column">
                  <div>
                    <mat-divider></mat-divider>
                    <div class="mt-3"></div>
                    <h4 class="my-3">Subtotal</h4>
                    <h5 class="my-3 font-weight-bold text-danger size">
                      <span *ngIf="IconPrice == null">
                        0
                      </span>
                      {{ IconPrice }}$
                    </h5>

                    <h4 class="my-5">Shipping</h4>
                  </div>

                  <div>
                    <mat-divider></mat-divider>
                    <div class="mt-3"></div>

                    <mat-radio-group
                      aria-label="Select an option"
                      class="d-flex flex-column my-5"
                      formControlName="shippingMode"
                      name="shippingMode"
                    >
                      <mat-radio-button value="DHL">
                        <h6 class="text-muted text-primary">
                          <em>DHL</em>
                        </h6>
                      </mat-radio-button>
                      <mat-radio-button value="Inpost">
                        <h6 class="text-muted text-primary">
                          <em>Inpost</em>
                        </h6>
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                </div>

                <!-- ------ -->
                <div class="row text-lg-left mt-4">
                  <div class="col-md-8">
                    <mat-divider></mat-divider>
                    <div class="mt-3"></div>
                    <h3 class="my-4">Total</h3>
                  </div>

                  <div class="col-md-4">
                    <mat-divider></mat-divider>
                    <div class="mt-3"></div>

                    <p class="size font-weight-bold">
                      {{ IconPrice }}<span *ngIf="IconPrice == null"> 0 </span>$
                    </p>
                  </div>
                </div>

                <!-- ------ -->
                <div class="row text-lg-left mt-4">
                  <div class="col-md-12">
                    <h1 [ngStyle.xs]="{ 'font-size': '4vw' }">
                      <em>Additional information</em>
                    </h1>
                    <h6 class="text-muted">Order notes (optional)</h6>
                    <mat-divider></mat-divider>

                    <mat-form-field appearance="fill" class="mt-4 w-75">
                      <mat-label [ngStyle.xs]="{ width: '7vw' }"
                        >Textarea</mat-label
                      >
                      <textarea matInput></textarea>
                    </mat-form-field>
                  </div>
                </div>

                <!-- ------ -->
                <div class="row text-lg-left mt-4">
                  <div class="col-md-12">
                    <mat-divider></mat-divider>
                    <mat-radio-group
                      aria-label="Select an option"
                      class="d-flex flex-column my-5"
                      formControlName="payment"
                      name="payment"
                    >
                      <mat-radio-button value="PayPal">
                        <h6 class="text-muted text-primary">
                          <em>PayPal</em>
                        </h6>
                      </mat-radio-button>
                      <mat-radio-button value="CreditCard">
                        <h6 class="text-muted text-primary">
                          <em>CreditCard</em>
                        </h6>
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
          <div class="mt-5 px-3">
            <button
              class="mx-4 py-2"
              [ngStyle.xs]="{ width: '20vw' }"
              style="padding: 5px 35px;"
              mat-raised-button
              (click)="Vertsubmit(VertStepper)"
              [disabled]="submited"
              style="background-color: #3f51b5; color: whitesmoke;"
            >
              Submit
            </button>
          </div>
        </form>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Succeeded</ng-template>
        <mat-card>
          <mat-card-content>
            <h1
              [ngStyle.xs]="{ 'font-size': '2vw' }"
              class="text-centertext-primary"
            >
              Thank you for your order
            </h1>
          </mat-card-content>
        </mat-card>

        <div>
          <button mat-button [routerLink]="['/']">Back to Store</button>
          <button mat-button [routerLink]="['/cart']">Back to Cart</button>
        </div>
      </mat-step>
    </mat-vertical-stepper>
  </mat-card-content>
</mat-card>
